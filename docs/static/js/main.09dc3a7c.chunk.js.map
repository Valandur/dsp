{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["recipesByComponent","Map","recipes","recipe","outputs","output","componentRecipes","get","id","asInput","asOutput","set","push","inputs","input","componentsRecipes","components","values","sort","a","b","localeCompare","App","useState","plans","setPlans","settings","setSettings","resources","setResources","newId","setNewId","newRate","setNewRate","displayFactor","setDisplayFactor","fractionDigits","setFractionalDigits","updatePlan","useCallback","plan","removePlan","delete","changeResourceSetting","newSettings","formatResourceRate","num","toFixed","useEffect","newResources","planQueue","filter","disabled","map","planId","implicit","i","shift","length","outputResource","external","usedBy","uses","setting","find","r","name","rate","outputRatio","amount","time","neededRate","inputResource","className","type","value","onChange","e","Number","target","component","placeholder","onClick","size","resourceId","resource","entries","reduce","acc","res","machine","use","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.09dc3a7c.chunk.js","sourcesContent":["import React, { FC, useCallback, useEffect, useState } from 'react';\nimport './App.css';\n\nimport recipes from './recipes.json';\n\nimport { Recipe } from './Recipe';\n\ninterface ComponentRecipes {\n\tid: string;\n\tasInput: Recipe[];\n\tasOutput: Recipe[];\n}\n\ninterface Plan {\n\trate: number;\n\tdisabled: boolean;\n}\n\ninterface Resource {\n\trecipe: Recipe | null;\n\texternal: boolean;\n\timplicit: boolean;\n\tusedBy: Map<string, number>;\n\tuses: Map<string, number>;\n}\n\ninterface ResourceSetting {\n\texternal?: boolean;\n\trecipe?: string;\n}\n\ninterface PlanQueueItem extends Plan {\n\tid: string;\n\timplicit: boolean;\n}\n\nconst recipesByComponent: Map<string, ComponentRecipes> = new Map();\nfor (const recipe of recipes) {\n\tfor (const output of recipe.outputs) {\n\t\tlet componentRecipes = recipesByComponent.get(output.id);\n\t\tif (!componentRecipes) {\n\t\t\tcomponentRecipes = { id: output.id, asInput: [], asOutput: [] };\n\t\t\trecipesByComponent.set(output.id, componentRecipes);\n\t\t}\n\t\tcomponentRecipes.asOutput.push(recipe as Recipe);\n\t}\n\tfor (const input of recipe.inputs) {\n\t\tlet componentsRecipes = recipesByComponent.get(input.id);\n\t\tif (!componentsRecipes) {\n\t\t\tcomponentsRecipes = { id: input.id, asInput: [], asOutput: [] };\n\t\t\trecipesByComponent.set(input.id, componentsRecipes);\n\t\t}\n\t\tcomponentsRecipes.asInput.push(recipe as Recipe);\n\t}\n}\n\nconst components = [...recipesByComponent.values()].sort((a, b) => a.id.localeCompare(b.id));\n\nconst App: FC = () => {\n\tconst [plans, setPlans] = useState<Map<string, Plan>>(new Map());\n\tconst [settings, setSettings] = useState<Map<string, ResourceSetting>>(new Map());\n\tconst [resources, setResources] = useState<Map<string, Resource>>(new Map());\n\tconst [newId, setNewId] = useState('electromagnetic_matrix');\n\tconst [newRate, setNewRate] = useState(1);\n\tconst [displayFactor, setDisplayFactor] = useState(60);\n\tconst [fractionDigits, setFractionalDigits] = useState(1);\n\n\tconst updatePlan = useCallback(\n\t\t(id: string, plan: Partial<Plan>) => setPlans((plans) => new Map(plans.set(id, { ...plans.get(id)!, ...plan }))),\n\t\t[setPlans]\n\t);\n\tconst removePlan = useCallback(\n\t\t(id: string) =>\n\t\t\tsetPlans((plans) => {\n\t\t\t\tplans.delete(id);\n\t\t\t\treturn new Map(plans);\n\t\t\t}),\n\t\t[setPlans]\n\t);\n\n\tconst changeResourceSetting = useCallback(\n\t\t(id: string, newSettings: Partial<ResourceSetting>) =>\n\t\t\tsetSettings((settings) => new Map(settings.set(id, { ...settings.get(id), ...newSettings }))),\n\t\t[setSettings]\n\t);\n\n\tconst formatResourceRate = useCallback((num: number) => (num * displayFactor).toFixed(fractionDigits), [\n\t\tdisplayFactor,\n\t\tfractionDigits\n\t]);\n\n\tuseEffect(() => {\n\t\tconst newResources = new Map<string, Resource>();\n\n\t\tconst planQueue: PlanQueueItem[] = [...plans]\n\t\t\t.filter(([, plan]) => !plan.disabled)\n\t\t\t.map(([planId, plan]) => ({ ...plan, id: planId, implicit: false }));\n\t\tlet i = 0;\n\t\twhile (planQueue.length > 0) {\n\t\t\ti++; // Safety to stop endless loops\n\t\t\tconst plan = planQueue.shift();\n\t\t\tif (!plan || i > 1000) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst recipes = recipesByComponent.get(plan.id)?.asOutput;\n\t\t\tif (!recipes || recipes.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet outputResource = newResources.get(plan.id);\n\t\t\tif (!outputResource) {\n\t\t\t\toutputResource = {\n\t\t\t\t\trecipe: null,\n\t\t\t\t\texternal: false,\n\t\t\t\t\timplicit: true,\n\t\t\t\t\tusedBy: new Map(),\n\t\t\t\t\tuses: new Map()\n\t\t\t\t};\n\t\t\t\tnewResources.set(plan.id, outputResource);\n\t\t\t}\n\n\t\t\tconst setting = settings.get(plan.id);\n\t\t\tconst recipe = recipes.find((r) => r.name === setting?.recipe) || recipes[0];\n\t\t\tif (!outputResource.recipe) {\n\t\t\t\toutputResource.recipe = recipe;\n\t\t\t}\n\n\t\t\tif (setting?.external) {\n\t\t\t\toutputResource.external = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!plan.implicit) {\n\t\t\t\toutputResource.implicit = false;\n\t\t\t\toutputResource.usedBy.set(plan.id, (outputResource.usedBy.get(plan.id) || 0) + plan.rate);\n\t\t\t}\n\n\t\t\tconst outputRatio = recipe.outputs.find((output) => output.id === plan.id)!.amount / recipe.time;\n\n\t\t\tfor (const input of recipe.inputs) {\n\t\t\t\tconst neededRate = (plan.rate / outputRatio) * (input.amount / recipe.time);\n\t\t\t\toutputResource.uses.set(input.id, (outputResource.uses.get(input.id) || 0) + neededRate);\n\n\t\t\t\tif (!outputResource.external) {\n\t\t\t\t\tlet inputResource = newResources.get(input.id);\n\t\t\t\t\tif (!inputResource) {\n\t\t\t\t\t\tinputResource = {\n\t\t\t\t\t\t\trecipe: null,\n\t\t\t\t\t\t\texternal: false,\n\t\t\t\t\t\t\timplicit: true,\n\t\t\t\t\t\t\tusedBy: new Map(),\n\t\t\t\t\t\t\tuses: new Map()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewResources.set(input.id, inputResource);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Break loops\n\t\t\t\t\tif (plan.id === input.id) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tinputResource.usedBy.set(plan.id, (inputResource.usedBy.get(plan.id) || 0) + neededRate);\n\t\t\t\t\tplanQueue.push({\n\t\t\t\t\t\tid: input.id,\n\t\t\t\t\t\trate: neededRate,\n\t\t\t\t\t\tdisabled: false,\n\t\t\t\t\t\timplicit: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetResources(newResources);\n\t}, [plans, settings]);\n\n\treturn (\n\t\t<div id=\"main\">\n\t\t\t<h1>Dyson Sphere Program Calculator</h1>\n\n\t\t\t<div id=\"settings\">\n\t\t\t\t<h2>Settings</h2>\n\t\t\t\t<div className=\"settings-item\">\n\t\t\t\t\t<div className=\"settings-item--name\">Rate [s]</div>\n\t\t\t\t\t<div className=\"settings-item--value\">\n\t\t\t\t\t\t<input type=\"number\" value={displayFactor} onChange={(e) => setDisplayFactor(Number(e.target.value))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"settings-item\">\n\t\t\t\t\t<div className=\"settings-item--name\">Fractional Digits</div>\n\t\t\t\t\t<div className=\"settings-item--value\">\n\t\t\t\t\t\t<input type=\"number\" value={fractionDigits} onChange={(e) => setFractionalDigits(Number(e.target.value))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div id=\"plan\">\n\t\t\t\t<h2>Planner</h2>\n\t\t\t\t<div className=\"plan-item-header\">\n\t\t\t\t\t<div className=\"plan-item--item\">Item</div>\n\t\t\t\t\t<div className=\"plan-item--rate\">Target rate [1/{displayFactor}s]</div>\n\t\t\t\t\t<div className=\"plan-item--action\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plan-item\">\n\t\t\t\t\t<div className=\"plan-item--item\">\n\t\t\t\t\t\t<select value={newId} onChange={(e) => setNewId(e.target.value)}>\n\t\t\t\t\t\t\t{components.map((component) => (\n\t\t\t\t\t\t\t\t<option key={component.id} value={component.id}>\n\t\t\t\t\t\t\t\t\t{component.id}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"plan-item--rate\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tplaceholder=\"Target rate\"\n\t\t\t\t\t\t\tvalue={newRate * displayFactor}\n\t\t\t\t\t\t\tonChange={(e) => setNewRate(Number(e.target.value) / displayFactor)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"plan-item--action\">\n\t\t\t\t\t\t<button onClick={() => updatePlan(newId, { rate: newRate })}>Add</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{[...plans].map(([planId, plan]) => (\n\t\t\t\t\t<div className={'plan-item' + (plan.disabled ? ' disabled' : '')} key={planId}>\n\t\t\t\t\t\t<div className=\"plan-item--item\">{planId}</div>\n\t\t\t\t\t\t<div className=\"plan-item--rate\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tplaceholder=\"Target rate\"\n\t\t\t\t\t\t\t\tvalue={plan.rate * displayFactor}\n\t\t\t\t\t\t\t\tonChange={(e) => updatePlan(planId, { rate: Number(e.target.value) / displayFactor })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"plan-item--action\">\n\t\t\t\t\t\t\t<button onClick={() => updatePlan(planId, { disabled: !plan.disabled })}>\n\t\t\t\t\t\t\t\t{plan.disabled ? 'Enable' : 'Disable'}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button onClick={() => removePlan(planId)}>Remove</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<div id=\"resources\">\n\t\t\t\t<h2>Resources</h2>\n\t\t\t\t<div className=\"resources-item-header\">\n\t\t\t\t\t<div className=\"resources-item--action\"></div>\n\t\t\t\t\t<div className=\"resources-item--item\">Item</div>\n\t\t\t\t\t<div className=\"resources-item--rate\">Rate [1/{displayFactor}s]</div>\n\t\t\t\t\t<div className=\"resources-item--rate\">Machines</div>\n\t\t\t\t\t<div className=\"resources-item--uses\">Uses</div>\n\t\t\t\t\t<div className=\"resources-item--usedby\">Used By</div>\n\t\t\t\t</div>\n\t\t\t\t{[...resources]\n\t\t\t\t\t.filter(([, resource]) => resource.usedBy.size > 0)\n\t\t\t\t\t.map(([resourceId, resource]) => {\n\t\t\t\t\t\tconst uses = [...resource.uses.entries()].map((e) => ({ id: e[0], rate: e[1] }));\n\t\t\t\t\t\tconst usedBy = [...resource.usedBy.entries()].map((e) => ({ id: e[0], rate: e[1] }));\n\t\t\t\t\t\tconst rate = usedBy.reduce((acc, res) => acc + res.rate, 0);\n\t\t\t\t\t\tconst recipes = recipesByComponent.get(resourceId)?.asOutput;\n\t\t\t\t\t\tconst outputRatio = resource.recipe\n\t\t\t\t\t\t\t? resource.recipe.outputs.find((output) => output.id === resourceId)!.amount / resource.recipe.time\n\t\t\t\t\t\t\t: 1;\n\n\t\t\t\t\t\tconst className =\n\t\t\t\t\t\t\t'resources-item' + (!resource.implicit ? ' explicit' : '') + (resource.external ? ' external' : '');\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={className} key={resourceId}>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--action\">\n\t\t\t\t\t\t\t\t\t{resource.implicit && (\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => changeResourceSetting(resourceId, { external: !resource.external })}>\n\t\t\t\t\t\t\t\t\t\t\tExternal\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--item\">\n\t\t\t\t\t\t\t\t\t<div>{resourceId}</div>\n\t\t\t\t\t\t\t\t\t{recipes && recipes.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={resource.recipe?.name}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => changeResourceSetting(resourceId, { recipe: e.target.value })}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{recipes.map((recipe) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value={recipe.name} key={recipe.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{recipe.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--rate\">{formatResourceRate(rate)}</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--machines\">\n\t\t\t\t\t\t\t\t\t{resource.recipe && `${(rate / outputRatio).toFixed(1)}x ${resource.recipe.machine}`}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--uses\">\n\t\t\t\t\t\t\t\t\t{uses.map((use) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={use.id}\n\t\t\t\t\t\t\t\t\t\t\tclassName={'resources-item--uses-item' + (use.id === resourceId ? ' recursive' : '')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--uses-item--rate\">{formatResourceRate(use.rate)}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--uses-item--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{use.id}\n\t\t\t\t\t\t\t\t\t\t\t\t{use.id === resourceId && ' üîÅ'}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby\">\n\t\t\t\t\t\t\t\t\t{!resource.implicit && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--rate\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatResourceRate(usedBy.find((usedBy) => usedBy.id === resourceId)!.rate)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--name\">Planner</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{usedBy\n\t\t\t\t\t\t\t\t\t\t.filter((usedBy) => usedBy.id !== resourceId)\n\t\t\t\t\t\t\t\t\t\t.map((usedBy) => (\n\t\t\t\t\t\t\t\t\t\t\t<div key={usedBy.id} className=\"resources-item--usedby-item\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--rate\">{formatResourceRate(usedBy.rate)}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--name\">{usedBy.id}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t<div id=\"recipes\">\n\t\t\t\t<h2>Recipes</h2>\n\t\t\t\t<div className=\"recipes-item-header\">\n\t\t\t\t\t<div className=\"recipes-item--name\">Name</div>\n\t\t\t\t\t<div className=\"recipes-item--inputs\">Inputs [1/{displayFactor}s]</div>\n\t\t\t\t\t<div className=\"recipes-item--time\">Time [s]</div>\n\t\t\t\t\t<div className=\"recipes-item--outputs\">Outputs [1/{displayFactor}s]</div>\n\t\t\t\t</div>\n\t\t\t\t{recipes.map((recipe, i) => (\n\t\t\t\t\t<div key={i} className=\"recipes-item\">\n\t\t\t\t\t\t<div className=\"recipes-item--name\">{recipe.name}</div>\n\t\t\t\t\t\t<div className=\"recipes-item--inputs\">\n\t\t\t\t\t\t\t{recipe.inputs.map((input) => (\n\t\t\t\t\t\t\t\t<div key={input.id} className=\"recipes-item--inputs-item\">\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--inputs-item--amount\">\n\t\t\t\t\t\t\t\t\t\t{((input.amount * displayFactor) / recipe.time).toFixed(fractionDigits)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--inputs-item--name\">{input.id}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"recipes-item--time\">{recipe.time}</div>\n\t\t\t\t\t\t<div className=\"recipes-item--outputs\">\n\t\t\t\t\t\t\t{recipe.outputs.map((output) => (\n\t\t\t\t\t\t\t\t<div key={output.id} className=\"recipes-item--outputs-item\">\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--outputs-item--amount\">\n\t\t\t\t\t\t\t\t\t\t{((output.amount * displayFactor) / recipe.time).toFixed(fractionDigits)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--outputs-item--name\">{output.id}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
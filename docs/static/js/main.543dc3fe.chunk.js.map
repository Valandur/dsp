{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["recipesByComponent","Map","recipes","recipe","outputs","output","componentRecipes","get","id","asInput","asOutput","set","push","inputs","input","componentsRecipes","components","values","sort","a","b","localeCompare","App","useState","resources","setResources","settings","setSettings","newId","setNewId","newRate","setNewRate","displayFactor","setDisplayFactor","changeSetting","useCallback","newSettings","formatResourceRate","num","toFixed","useEffect","newResources","queuedSettings","filter","setting","disabled","map","implicit","i","shift","length","outputResource","external","usedBy","uses","find","r","name","rate","outputRatio","amount","time","neededRate","inputResource","className","type","value","onChange","e","Number","target","component","placeholder","onClick","undefined","resource","size","entries","reduce","acc","res","Math","round","machine","use","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.543dc3fe.chunk.js","sourcesContent":["import React, { FC, useCallback, useEffect, useState } from 'react';\nimport './App.css';\n\nimport recipes from './recipes.json';\n\nimport { Recipe } from './Recipe';\n\ninterface ComponentRecipes {\n\tid: string;\n\tasInput: Recipe[];\n\tasOutput: Recipe[];\n}\n\ninterface Resource {\n\tid: string;\n\trecipe: Recipe | null;\n\timplicit: boolean;\n\texternal: boolean;\n\tusedBy: Map<string, number>;\n\tuses: Map<string, number>;\n}\n\ninterface Setting {\n\tid: string;\n\trate?: number;\n\tdisabled?: boolean;\n\texternal?: boolean;\n\trecipe?: string;\n}\n\ninterface QueuedSetting extends Setting {\n\timplicit: boolean;\n}\n\nconst recipesByComponent: Map<string, ComponentRecipes> = new Map();\nfor (const recipe of recipes) {\n\tfor (const output of recipe.outputs) {\n\t\tlet componentRecipes = recipesByComponent.get(output.id);\n\t\tif (!componentRecipes) {\n\t\t\tcomponentRecipes = { id: output.id, asInput: [], asOutput: [] };\n\t\t\trecipesByComponent.set(output.id, componentRecipes);\n\t\t}\n\t\tcomponentRecipes.asOutput.push(recipe as Recipe);\n\t}\n\tfor (const input of recipe.inputs) {\n\t\tlet componentsRecipes = recipesByComponent.get(input.id);\n\t\tif (!componentsRecipes) {\n\t\t\tcomponentsRecipes = { id: input.id, asInput: [], asOutput: [] };\n\t\t\trecipesByComponent.set(input.id, componentsRecipes);\n\t\t}\n\t\tcomponentsRecipes.asInput.push(recipe as Recipe);\n\t}\n}\n\nconst components = [...recipesByComponent.values()].sort((a, b) => a.id.localeCompare(b.id));\n\nconst App: FC = () => {\n\tconst [resources, setResources] = useState<Resource[]>([]);\n\tconst [settings, setSettings] = useState<Map<string, Setting>>(new Map());\n\tconst [newId, setNewId] = useState('electromagnetic_matrix');\n\tconst [newRate, setNewRate] = useState(1);\n\tconst [displayFactor, setDisplayFactor] = useState(60);\n\n\tconst changeSetting = useCallback((id: string, newSettings: Partial<Omit<Setting, 'id'>>) => {\n\t\tsetSettings((settings) => new Map(settings.set(id, { id, ...settings.get(id), ...newSettings })));\n\t}, []);\n\tconst formatResourceRate = useCallback((num: number) => (num * displayFactor).toFixed(1), [displayFactor]);\n\n\tuseEffect(() => {\n\t\t// Reset all resources\n\t\tconst newResources = new Map<string, Resource>();\n\n\t\tconst queuedSettings: QueuedSetting[] = [...settings.values()]\n\t\t\t.filter((setting) => !setting.disabled)\n\t\t\t.map((setting) => ({ ...setting, implicit: false }));\n\t\tlet i = 0;\n\t\twhile (queuedSettings.length > 0) {\n\t\t\ti++; // Safety to stop endless loops\n\t\t\tconst setting = queuedSettings.shift();\n\t\t\tif (!setting || i > 1000) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst recipes = recipesByComponent.get(setting.id)?.asOutput;\n\t\t\tif (!recipes || recipes.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet outputResource = newResources.get(setting.id);\n\t\t\tif (!outputResource) {\n\t\t\t\toutputResource = {\n\t\t\t\t\tid: setting.id,\n\t\t\t\t\trecipe: null,\n\t\t\t\t\timplicit: true,\n\t\t\t\t\texternal: false,\n\t\t\t\t\tusedBy: new Map(),\n\t\t\t\t\tuses: new Map()\n\t\t\t\t};\n\t\t\t\tnewResources.set(outputResource.id, outputResource);\n\t\t\t}\n\n\t\t\tconst recipe = outputResource.recipe || recipes.find((r) => r.name === setting.recipe) || recipes[0];\n\t\t\tif (!outputResource.recipe) {\n\t\t\t\toutputResource.recipe = recipe;\n\t\t\t}\n\n\t\t\tif (setting.external) {\n\t\t\t\toutputResource.external = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!setting.rate) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (!setting.implicit) {\n\t\t\t\toutputResource.implicit = false;\n\t\t\t\toutputResource.usedBy.set(setting.id, (outputResource.usedBy.get(setting.id) || 0) + setting.rate);\n\t\t\t}\n\n\t\t\tconst outputRatio = recipe.outputs.find((output) => output.id === setting.id)!.amount / recipe.time;\n\n\t\t\tfor (const input of recipe.inputs) {\n\t\t\t\tconst neededRate = (setting.rate / outputRatio) * (input.amount / recipe.time);\n\t\t\t\toutputResource.uses.set(input.id, (outputResource.uses.get(input.id) || 0) + neededRate);\n\n\t\t\t\tif (!outputResource.external) {\n\t\t\t\t\tlet inputResource = newResources.get(input.id);\n\t\t\t\t\tif (!inputResource) {\n\t\t\t\t\t\tinputResource = {\n\t\t\t\t\t\t\tid: input.id,\n\t\t\t\t\t\t\trecipe: null,\n\t\t\t\t\t\t\timplicit: true,\n\t\t\t\t\t\t\texternal: false,\n\t\t\t\t\t\t\tusedBy: new Map(),\n\t\t\t\t\t\t\tuses: new Map()\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewResources.set(inputResource.id, inputResource);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Break loops\n\t\t\t\t\tif (outputResource.id === inputResource.id) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tinputResource.usedBy.set(setting.id, (inputResource.usedBy.get(setting.id) || 0) + neededRate);\n\t\t\t\t\tqueuedSettings.push({\n\t\t\t\t\t\tid: input.id,\n\t\t\t\t\t\trate: neededRate,\n\t\t\t\t\t\trecipe: recipe.name,\n\t\t\t\t\t\tdisabled: false,\n\t\t\t\t\t\timplicit: true,\n\t\t\t\t\t\texternal: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsetResources([...newResources.values()]);\n\t}, [settings]);\n\n\treturn (\n\t\t<div id=\"main\">\n\t\t\t<h1>Dyson Sphere Program</h1>\n\n\t\t\t<div id=\"settings\">\n\t\t\t\t<h2>Settings</h2>\n\t\t\t\t<div className=\"settings-item\">\n\t\t\t\t\t<div className=\"settings-item--name\">Rate [s]</div>\n\t\t\t\t\t<div className=\"settings-item--value\">\n\t\t\t\t\t\t<input type=\"number\" value={displayFactor} onChange={(e) => setDisplayFactor(Number(e.target.value))} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div id=\"plan\">\n\t\t\t\t<h2>Planner</h2>\n\t\t\t\t<div className=\"plan-item-header\">\n\t\t\t\t\t<div className=\"plan-item--item\">Item</div>\n\t\t\t\t\t<div className=\"plan-item--rate\">Target rate [1/{displayFactor}s]</div>\n\t\t\t\t\t<div className=\"plan-item--action\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"plan-item\">\n\t\t\t\t\t<div className=\"plan-item--item\">\n\t\t\t\t\t\t<select value={newId} onChange={(e) => setNewId(e.target.value)}>\n\t\t\t\t\t\t\t{components.map((component) => (\n\t\t\t\t\t\t\t\t<option key={component.id} value={component.id}>\n\t\t\t\t\t\t\t\t\t{component.id}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"plan-item--rate\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tplaceholder=\"Target rate\"\n\t\t\t\t\t\t\tvalue={newRate * displayFactor}\n\t\t\t\t\t\t\tonChange={(e) => setNewRate(Number(e.target.value) / displayFactor)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"plan-item--action\">\n\t\t\t\t\t\t<button onClick={() => changeSetting(newId, { disabled: false, rate: newRate })}>+</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{[...settings.values()]\n\t\t\t\t\t.filter((setting) => !!setting.rate || setting.recipe)\n\t\t\t\t\t.map((setting) => (\n\t\t\t\t\t\t<div className={'plan-item' + (setting.disabled ? ' disabled' : '')} key={setting.id}>\n\t\t\t\t\t\t\t<div className=\"plan-item--item\">{setting.id}</div>\n\t\t\t\t\t\t\t<div className=\"plan-item--rate\">{setting.rate && setting.rate * displayFactor}</div>\n\t\t\t\t\t\t\t<div className=\"plan-item--action\">\n\t\t\t\t\t\t\t\t<button onClick={() => changeSetting(setting.id, { disabled: !setting.disabled })}>T</button>{' '}\n\t\t\t\t\t\t\t\t<button onClick={() => changeSetting(setting.id, { rate: undefined })}>-</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t</div>\n\n\t\t\t<div id=\"resources\">\n\t\t\t\t<h2>Resources</h2>\n\t\t\t\t<div className=\"resources-item-header\">\n\t\t\t\t\t<div className=\"resources-item--action\"></div>\n\t\t\t\t\t<div className=\"resources-item--item\">Item</div>\n\t\t\t\t\t<div className=\"resources-item--rate\">Rate [1/{displayFactor}s]</div>\n\t\t\t\t\t<div className=\"resources-item--rate\">Machines</div>\n\t\t\t\t\t<div className=\"resources-item--uses\">Uses</div>\n\t\t\t\t\t<div className=\"resources-item--usedby\">Used By</div>\n\t\t\t\t</div>\n\t\t\t\t{resources\n\t\t\t\t\t.filter((resource) => resource.usedBy.size > 0)\n\t\t\t\t\t.map((resource) => {\n\t\t\t\t\t\tconst uses = [...resource.uses.entries()].map((e) => ({ id: e[0], rate: e[1] }));\n\t\t\t\t\t\tconst usedBy = [...resource.usedBy.entries()].map((e) => ({ id: e[0], rate: e[1] }));\n\t\t\t\t\t\tconst rate = usedBy.reduce((acc, res) => acc + res.rate, 0);\n\t\t\t\t\t\tconst recipes = recipesByComponent.get(resource.id)?.asOutput;\n\t\t\t\t\t\tconst outputRatio = resource.recipe\n\t\t\t\t\t\t\t? resource.recipe.outputs.find((output) => output.id === resource.id)!.amount / resource.recipe.time\n\t\t\t\t\t\t\t: 1;\n\n\t\t\t\t\t\tconst className =\n\t\t\t\t\t\t\t'resources-item' + (!resource.implicit ? ' explicit' : '') + (resource.external ? ' external' : '');\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div className={className} key={resource.id}>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--action\">\n\t\t\t\t\t\t\t\t\t{resource.implicit ? (\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => changeSetting(resource.id, { external: !resource.external })}>E</button>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<div />\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{recipes && recipes.length > 1 && (\n\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\tvalue={resource.recipe?.name}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => changeSetting(resource.id, { recipe: e.target.value })}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{recipes.map((recipe) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={recipe.name} key={recipe.name}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{recipe.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--item\">{resource.id}</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--rate\">{formatResourceRate(rate)}</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--machines\">\n\t\t\t\t\t\t\t\t\t{resource.recipe && (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t{Math.round((rate / outputRatio) * 10) / 10}x {resource.recipe.machine}\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--uses\">\n\t\t\t\t\t\t\t\t\t{uses.map((use) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={use.id}\n\t\t\t\t\t\t\t\t\t\t\tclassName={'resources-item--uses-item' + (use.id === resource.id ? ' recursive' : '')}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--uses-item--rate\">{formatResourceRate(use.rate)}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--uses-item--name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{use.id}\n\t\t\t\t\t\t\t\t\t\t\t\t{use.id === resource.id && ' 🔁'}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby\">\n\t\t\t\t\t\t\t\t\t{!resource.implicit && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--rate\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatResourceRate(usedBy.find((usedBy) => usedBy.id === resource.id)!.rate)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--name\">Planner</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{usedBy\n\t\t\t\t\t\t\t\t\t\t.filter((usedBy) => usedBy.id !== resource.id)\n\t\t\t\t\t\t\t\t\t\t.map((usedBy) => (\n\t\t\t\t\t\t\t\t\t\t\t<div key={usedBy.id} className=\"resources-item--usedby-item\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--rate\">{formatResourceRate(usedBy.rate)}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"resources-item--usedby-item--name\">{usedBy.id}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t<div id=\"recipes\">\n\t\t\t\t<h2>Recipes</h2>\n\t\t\t\t<div className=\"recipes-item-header\">\n\t\t\t\t\t<div className=\"recipes-item--name\">Name</div>\n\t\t\t\t\t<div className=\"recipes-item--inputs\">Inputs [1/min]</div>\n\t\t\t\t\t<div className=\"recipes-item--outputs\">Outputs [1/min]</div>\n\t\t\t\t</div>\n\t\t\t\t{recipes.map((recipe, i) => (\n\t\t\t\t\t<div key={i} className=\"recipes-item\">\n\t\t\t\t\t\t<div className=\"recipes-item--name\">{recipe.name}</div>\n\t\t\t\t\t\t<div className=\"recipes-item--inputs\">\n\t\t\t\t\t\t\t{recipe.inputs.map((input) => (\n\t\t\t\t\t\t\t\t<div key={input.id} className=\"recipes-item--inputs-item\">\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--inputs-item--amount\">{(input.amount * 60) / recipe.time}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--inputs-item--name\">{input.id}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"recipes-item--outputs\">\n\t\t\t\t\t\t\t{recipe.outputs.map((output) => (\n\t\t\t\t\t\t\t\t<div key={output.id} className=\"recipes-item--outputs-item\">\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--outputs-item--amount\">{(output.amount * 60) / recipe.time}</div>\n\t\t\t\t\t\t\t\t\t<div className=\"recipes-item--outputs-item--name\">{output.id}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
(this.webpackJsonpdsp=this.webpackJsonpdsp||[]).push([[0],{15:function(e,t,i){},16:function(e,t,i){},18:function(e,t,i){"use strict";i.r(t);var n,a=i(1),s=i.n(a),c=i(10),r=i.n(c),m=(i(15),i(4)),u=i(2),o=i(3),d=i(7),l=(i(16),i(9)),p=i(0),b=new Map,j=Object(d.a)(l);try{for(j.s();!(n=j.n()).done;){var h,_=n.value,g=Object(d.a)(_.outputs);try{for(g.s();!(h=g.n()).done;){var O=h.value,v=b.get(O.id);v||(v={id:O.id,asInput:[],asOutput:[]},b.set(O.id,v)),v.asOutput.push(_)}}catch(M){g.e(M)}finally{g.f()}var x,f=Object(d.a)(_.inputs);try{for(f.s();!(x=f.n()).done;){var y=x.value,N=b.get(y.id);N||(N={id:y.id,asInput:[],asOutput:[]},b.set(y.id,N)),N.asInput.push(_)}}catch(M){f.e(M)}finally{f.f()}}}catch(M){j.e(M)}finally{j.f()}var C=Object(o.a)(b.values()).sort((function(e,t){return e.id.localeCompare(t.id)})),w=function(){var e=Object(a.useState)(new Map),t=Object(u.a)(e,2),i=t[0],n=t[1],s=Object(a.useState)(new Map),c=Object(u.a)(s,2),r=c[0],j=c[1],h=Object(a.useState)(new Map),_=Object(u.a)(h,2),g=_[0],O=_[1],v=Object(a.useState)("electromagnetic_matrix"),x=Object(u.a)(v,2),f=x[0],y=x[1],N=Object(a.useState)(1),w=Object(u.a)(N,2),k=w[0],S=w[1],B=Object(a.useState)(60),F=Object(u.a)(B,2),I=F[0],P=F[1],R=Object(a.useState)(1),T=Object(u.a)(R,2),D=T[0],E=T[1],q=Object(a.useCallback)((function(e,t){return n((function(i){return new Map(i.set(e,Object(m.a)(Object(m.a)({},i.get(e)),t)))}))}),[n]),J=Object(a.useCallback)((function(e){return n((function(t){return t.delete(e),new Map(t)}))}),[n]),L=Object(a.useCallback)((function(e,t){return j((function(i){return new Map(i.set(e,Object(m.a)(Object(m.a)({},i.get(e)),t)))}))}),[j]),U=Object(a.useCallback)((function(e){return(e*I).toFixed(D)}),[I,D]);return Object(a.useEffect)((function(){for(var e=new Map,t=Object(o.a)(i).filter((function(e){return!Object(u.a)(e,2)[1].disabled})).map((function(e){var t=Object(u.a)(e,2),i=t[0],n=t[1];return Object(m.a)(Object(m.a)({},n),{},{id:i,implicit:!1})})),n=0,a=function(){var i;n++;var a=t.shift();if(!a||n>1e3)return"break";var s=null===(i=b.get(a.id))||void 0===i?void 0:i.asOutput;if(!s||0===s.length)return"continue";var c=e.get(a.id);c||(c={recipe:null,external:!1,implicit:!0,usedBy:new Map,uses:new Map},e.set(a.id,c));var m=r.get(a.id),u=s.find((function(e){return e.name===(null===m||void 0===m?void 0:m.recipe)}))||s[0];if(c.recipe||(c.recipe=u),null===m||void 0===m?void 0:m.external)return c.external=!0,"continue";a.implicit||(c.implicit=!1,c.usedBy.set(a.id,(c.usedBy.get(a.id)||0)+a.rate));var o,l=u.outputs.find((function(e){return e.id===a.id})).amount/u.time,p=Object(d.a)(u.inputs);try{for(p.s();!(o=p.n()).done;){var j=o.value,h=a.rate/l*(j.amount/u.time);if(c.uses.set(j.id,(c.uses.get(j.id)||0)+h),!c.external){var _=e.get(j.id);if(_||(_={recipe:null,external:!1,implicit:!0,usedBy:new Map,uses:new Map},e.set(j.id,_)),a.id===j.id)continue;_.usedBy.set(a.id,(_.usedBy.get(a.id)||0)+h),t.push({id:j.id,rate:h,disabled:!1,implicit:!0})}}}catch(M){p.e(M)}finally{p.f()}};t.length>0;){var s=a();if("break"===s)break}O(e)}),[i,r]),Object(p.jsxs)("div",{id:"main",children:[Object(p.jsx)("h1",{children:"Dyson Sphere Program Calculator"}),Object(p.jsxs)("div",{id:"settings",children:[Object(p.jsx)("h2",{children:"Settings"}),Object(p.jsxs)("div",{className:"settings-item",children:[Object(p.jsx)("div",{className:"settings-item--name",children:"Rate [s]"}),Object(p.jsx)("div",{className:"settings-item--value",children:Object(p.jsx)("input",{type:"number",value:I,onChange:function(e){return P(Number(e.target.value))}})})]}),Object(p.jsxs)("div",{className:"settings-item",children:[Object(p.jsx)("div",{className:"settings-item--name",children:"Fractional Digits"}),Object(p.jsx)("div",{className:"settings-item--value",children:Object(p.jsx)("input",{type:"number",value:D,onChange:function(e){return E(Number(e.target.value))}})})]})]}),Object(p.jsxs)("div",{id:"plan",children:[Object(p.jsx)("h2",{children:"Planner"}),Object(p.jsxs)("div",{className:"plan-item-header",children:[Object(p.jsx)("div",{className:"plan-item--item",children:"Item"}),Object(p.jsxs)("div",{className:"plan-item--rate",children:["Target rate [1/",I,"s]"]}),Object(p.jsx)("div",{className:"plan-item--action"})]}),Object(p.jsxs)("div",{className:"plan-item",children:[Object(p.jsx)("div",{className:"plan-item--item",children:Object(p.jsx)("select",{value:f,onChange:function(e){return y(e.target.value)},children:C.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.id},e.id)}))})}),Object(p.jsx)("div",{className:"plan-item--rate",children:Object(p.jsx)("input",{type:"number",placeholder:"Target rate",value:k*I,onChange:function(e){return S(Number(e.target.value)/I)}})}),Object(p.jsx)("div",{className:"plan-item--action",children:Object(p.jsx)("button",{onClick:function(){return q(f,{rate:k})},children:"Add"})})]}),Object(o.a)(i).map((function(e){var t=Object(u.a)(e,2),i=t[0],n=t[1];return Object(p.jsxs)("div",{className:"plan-item"+(n.disabled?" disabled":""),children:[Object(p.jsx)("div",{className:"plan-item--item",children:i}),Object(p.jsx)("div",{className:"plan-item--rate",children:Object(p.jsx)("input",{type:"number",placeholder:"Target rate",value:n.rate*I,onChange:function(e){return q(i,{rate:Number(e.target.value)/I})}})}),Object(p.jsxs)("div",{className:"plan-item--action",children:[Object(p.jsx)("button",{onClick:function(){return q(i,{disabled:!n.disabled})},children:n.disabled?"Enable":"Disable"}),Object(p.jsx)("button",{onClick:function(){return J(i)},children:"Remove"})]})]},i)}))]}),Object(p.jsxs)("div",{id:"resources",children:[Object(p.jsx)("h2",{children:"Resources"}),Object(p.jsxs)("div",{className:"resources-item-header",children:[Object(p.jsx)("div",{className:"resources-item--action"}),Object(p.jsx)("div",{className:"resources-item--item",children:"Item"}),Object(p.jsxs)("div",{className:"resources-item--rate",children:["Rate [1/",I,"s]"]}),Object(p.jsx)("div",{className:"resources-item--rate",children:"Machines"}),Object(p.jsx)("div",{className:"resources-item--uses",children:"Uses"}),Object(p.jsx)("div",{className:"resources-item--usedby",children:"Used By"})]}),Object(o.a)(g).filter((function(e){return Object(u.a)(e,2)[1].usedBy.size>0})).map((function(e){var t,i,n=Object(u.a)(e,2),a=n[0],s=n[1],c=Object(o.a)(s.uses.entries()).map((function(e){return{id:e[0],rate:e[1]}})),r=Object(o.a)(s.usedBy.entries()).map((function(e){return{id:e[0],rate:e[1]}})),m=r.reduce((function(e,t){return e+t.rate}),0),d=null===(t=b.get(a))||void 0===t?void 0:t.asOutput,l=s.recipe?s.recipe.outputs.find((function(e){return e.id===a})).amount/s.recipe.time:1,j="resources-item"+(s.implicit?"":" explicit")+(s.external?" external":"");return Object(p.jsxs)("div",{className:j,children:[Object(p.jsx)("div",{className:"resources-item--action",children:s.implicit&&Object(p.jsx)("button",{onClick:function(){return L(a,{external:!s.external})},children:s.external?"Produce Locally":"Produce Externally"})}),Object(p.jsxs)("div",{className:"resources-item--item",children:[Object(p.jsx)("div",{children:a}),d&&d.length>1&&Object(p.jsx)("div",{children:Object(p.jsx)("select",{value:null===(i=s.recipe)||void 0===i?void 0:i.name,onChange:function(e){return L(a,{recipe:e.target.value})},children:d.map((function(e){return Object(p.jsx)("option",{value:e.name,children:e.name},e.name)}))})})]}),Object(p.jsx)("div",{className:"resources-item--rate",children:U(m)}),Object(p.jsx)("div",{className:"resources-item--machines",children:s.recipe&&"".concat((m/l).toFixed(1),"x ").concat(s.recipe.machine)}),Object(p.jsx)("div",{className:"resources-item--uses",children:c.map((function(e){return Object(p.jsxs)("div",{className:"resources-item--uses-item"+(e.id===a?" recursive":""),children:[Object(p.jsx)("div",{className:"resources-item--uses-item--rate",children:U(e.rate)}),Object(p.jsxs)("div",{className:"resources-item--uses-item--name",children:[e.id,e.id===a&&" \ud83d\udd01"]})]},e.id)}))}),Object(p.jsxs)("div",{className:"resources-item--usedby",children:[!s.implicit&&Object(p.jsxs)("div",{className:"resources-item--usedby-item",children:[Object(p.jsx)("div",{className:"resources-item--usedby-item--rate",children:U(r.find((function(e){return e.id===a})).rate)}),Object(p.jsx)("div",{className:"resources-item--usedby-item--name",children:"Planner"})]}),r.filter((function(e){return e.id!==a})).map((function(e){return Object(p.jsxs)("div",{className:"resources-item--usedby-item",children:[Object(p.jsx)("div",{className:"resources-item--usedby-item--rate",children:U(e.rate)}),Object(p.jsx)("div",{className:"resources-item--usedby-item--name",children:e.id})]},e.id)}))]})]},a)}))]}),Object(p.jsxs)("div",{id:"recipes",children:[Object(p.jsx)("h2",{children:"Recipes"}),Object(p.jsxs)("div",{className:"recipes-item-header",children:[Object(p.jsx)("div",{className:"recipes-item--name",children:"Name"}),Object(p.jsxs)("div",{className:"recipes-item--inputs",children:["Inputs [1/",I,"s]"]}),Object(p.jsx)("div",{className:"recipes-item--time",children:"Time [s]"}),Object(p.jsxs)("div",{className:"recipes-item--outputs",children:["Outputs [1/",I,"s]"]})]}),l.map((function(e,t){return Object(p.jsxs)("div",{className:"recipes-item",children:[Object(p.jsx)("div",{className:"recipes-item--name",children:e.name}),Object(p.jsx)("div",{className:"recipes-item--inputs",children:e.inputs.map((function(t){return Object(p.jsxs)("div",{className:"recipes-item--inputs-item",children:[Object(p.jsx)("div",{className:"recipes-item--inputs-item--amount",children:(t.amount*I/e.time).toFixed(D)}),Object(p.jsx)("div",{className:"recipes-item--inputs-item--name",children:t.id})]},t.id)}))}),Object(p.jsx)("div",{className:"recipes-item--time",children:e.time}),Object(p.jsx)("div",{className:"recipes-item--outputs",children:e.outputs.map((function(t){return Object(p.jsxs)("div",{className:"recipes-item--outputs-item",children:[Object(p.jsx)("div",{className:"recipes-item--outputs-item--amount",children:(t.amount*I/e.time).toFixed(D)}),Object(p.jsx)("div",{className:"recipes-item--outputs-item--name",children:t.id})]},t.id)}))})]},t)}))]})]})},k=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;i(e),n(e),a(e),s(e),c(e)}))};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),k()},9:function(e){e.exports=JSON.parse('[{"name":"iron_ingot","inputs":[{"id":"iron_ore","amount":1}],"outputs":[{"id":"iron_ingot","amount":1}],"time":1,"machine":"smelter"},{"name":"copper_ingot","inputs":[{"id":"copper_ore","amount":1}],"outputs":[{"id":"copper_ingot","amount":1}],"time":1,"machine":"smelter"},{"name":"high_purity_silicon","inputs":[{"id":"silicon_ore","amount":2}],"outputs":[{"id":"high_purity_silicon","amount":1}],"time":2,"machine":"smelter"},{"name":"titanium_ingot","inputs":[{"id":"titanium_ore","amount":2}],"outputs":[{"id":"titanium_ingot","amount":1}],"time":2,"machine":"smelter"},{"name":"stone","inputs":[{"id":"stone_ore","amount":1}],"outputs":[{"id":"stone","amount":1}],"time":1,"machine":"smelter"},{"name":"energetic_graphite","inputs":[{"id":"coal_ore","amount":2}],"outputs":[{"id":"energetic_graphite","amount":1}],"time":2,"machine":"smelter"},{"name":"Plasma Refining","inputs":[{"id":"crude_oil","amount":2}],"outputs":[{"id":"hydrogen","amount":1},{"id":"refined_oil","amount":2}],"time":4,"machine":"oil_refinery"},{"name":"plastic","inputs":[{"id":"refined_oil","amount":2},{"id":"energetic_graphite","amount":1}],"outputs":[{"id":"plastic","amount":1}],"time":3,"machine":"chemical_lab"},{"name":"graphene","inputs":[{"id":"sulfuric_acid","amount":1},{"id":"energetic_graphite","amount":3}],"outputs":[{"id":"graphene","amount":2}],"time":3,"machine":"chemical_lab"},{"name":"magnet","inputs":[{"id":"iron_ore","amount":1}],"outputs":[{"id":"magnet","amount":1}],"time":1.5,"machine":"smelter"},{"name":"magnetic_coil","inputs":[{"id":"magnet","amount":2},{"id":"copper_ingot","amount":1}],"outputs":[{"id":"magnetic_coil","amount":2}],"time":1,"machine":"assembler"},{"name":"crystal_silicon","inputs":[{"id":"high_purity_silicon","amount":1}],"outputs":[{"id":"crystal_silicon","amount":2}],"time":2,"machine":"smelter"},{"name":"titanium_alloy","inputs":[{"id":"titanium_ingot","amount":4},{"id":"steel","amount":4},{"id":"sulfuric_acid","amount":8}],"outputs":[{"id":"titanium_alloy","amount":4}],"time":12,"machine":"smelter"},{"name":"glass","inputs":[{"id":"stone_ore","amount":2}],"outputs":[{"id":"glass","amount":1}],"time":2,"machine":"smelter"},{"name":"diamond","inputs":[{"id":"energetic_graphite","amount":1}],"outputs":[{"id":"diamond","amount":1}],"time":2,"machine":"smelter"},{"name":"X-Ray Cracking","inputs":[{"id":"hydrogen","amount":2},{"id":"refined_oil","amount":1}],"outputs":[{"id":"hydrogen","amount":3},{"id":"energetic_graphite","amount":1}],"time":4,"machine":"oil_refinery"},{"name":"organic_crystal","inputs":[{"id":"plastic","amount":2},{"id":"refined_oil","amount":1},{"id":"water","amount":1}],"outputs":[{"id":"organic_crystal","amount":1}],"time":6,"machine":"chemical_lab"},{"name":"graphene_advanced","inputs":[{"id":"fire_ice","amount":2}],"outputs":[{"id":"graphene","amount":2},{"id":"hydrogen","amount":1}],"time":2,"machine":"chemical_lab"},{"name":"steel","inputs":[{"id":"iron_ingot","amount":3}],"outputs":[{"id":"steel","amount":1}],"time":3,"machine":"smelter"},{"name":"electric_motor","inputs":[{"id":"iron_ingot","amount":2},{"id":"gear","amount":1},{"id":"magnetic_coil","amount":1}],"outputs":[{"id":"electric_motor","amount":1}],"time":2,"machine":"assembler"},{"name":"crystal_silicon_advanced","inputs":[{"id":"fractal_silicon","amount":1}],"outputs":[{"id":"crystal_silicon","amount":1}],"time":4,"machine":"assembler"},{"name":"titanium_glass","inputs":[{"id":"glass","amount":2},{"id":"titanium_ingot","amount":2},{"id":"water","amount":2}],"outputs":[{"id":"titanium_glass","amount":2}],"time":5,"machine":"assembler"},{"name":"prism","inputs":[{"id":"glass","amount":3}],"outputs":[{"id":"prism","amount":2}],"time":2,"machine":"assembler"},{"name":"titanium_crystal","inputs":[{"id":"titanium_ingot","amount":3},{"id":"organic_crystal","amount":1}],"outputs":[{"id":"titanium_crystal","amount":1}],"time":4,"machine":"assembler"},{"name":"strange_matter","inputs":[{"id":"particle_container","amount":2},{"id":"iron_ingot","amount":2},{"id":"deuterium","amount":10}],"outputs":[{"id":"strange_matter","amount":1}],"time":8,"machine":"particle_collider"},{"name":"gear","inputs":[{"id":"iron_ingot","amount":1}],"outputs":[{"id":"gear","amount":1}],"time":1,"machine":"assembler"},{"name":"electromagnetic_turbine","inputs":[{"id":"electric_motor","amount":2},{"id":"magnetic_coil","amount":2}],"outputs":[{"id":"electromagnetic_turbine","amount":1}],"time":2,"machine":"assembler"},{"name":"silicon_ore","inputs":[{"id":"stone_ore","amount":10}],"outputs":[{"id":"silicon_ore","amount":1}],"time":10,"machine":"smelter"},{"name":"circuit_board","inputs":[{"id":"copper_ingot","amount":1},{"id":"iron_ingot","amount":2}],"outputs":[{"id":"circuit_board","amount":2}],"time":1,"machine":"assembler"},{"name":"graviton_lens","inputs":[{"id":"diamond","amount":4},{"id":"strange_matter","amount":1}],"outputs":[{"id":"graviton_lens","amount":1}],"time":6,"machine":"assembler"},{"name":"sulfuric_acid","inputs":[{"id":"refined_oil","amount":6},{"id":"stone_ore","amount":8},{"id":"water","amount":4}],"outputs":[{"id":"sulfuric_acid","amount":4}],"time":6,"machine":"chemical_lab"},{"name":"deuterium","inputs":[{"id":"hydrogen","amount":10}],"outputs":[{"id":"deuterium","amount":5}],"time":5,"machine":"particle_collider"},{"name":"plane_filter","inputs":[{"id":"casimir_crystal","amount":2},{"id":"titanium_glass","amount":2}],"outputs":[{"id":"plane_filter","amount":1}],"time":12,"machine":"assembler"},{"name":"carbon_nanotube","inputs":[{"id":"graphene","amount":3},{"id":"titanium_ingot","amount":1}],"outputs":[{"id":"carbon_nanotube","amount":2}],"time":4,"machine":"chemical_lab"},{"name":"super_magnetic_ring","inputs":[{"id":"electromagnetic_turbine","amount":2},{"id":"magnet","amount":3},{"id":"energetic_graphite","amount":1}],"outputs":[{"id":"super_magnetic_ring","amount":1}],"time":3,"machine":"assembler"},{"name":"particle_broadband","inputs":[{"id":"carbon_nanotube","amount":2},{"id":"crystal_silicon","amount":2},{"id":"plastic","amount":1}],"outputs":[{"id":"particle_broadband","amount":1}],"time":8,"machine":"assembler"},{"name":"processor","inputs":[{"id":"circuit_board","amount":2},{"id":"microcrystalline_component","amount":2}],"outputs":[{"id":"processor","amount":1}],"time":3,"machine":"assembler"},{"name":"casimir_crystal","inputs":[{"id":"titanium_crystal","amount":2},{"id":"graphene","amount":2},{"id":"hydrogen","amount":12}],"outputs":[{"id":"casimir_crystal","amount":1}],"time":4,"machine":"assembler"},{"name":"particle_container","inputs":[{"id":"electromagnetic_turbine","amount":2},{"id":"copper_ingot","amount":2},{"id":"graphene","amount":2}],"outputs":[{"id":"particle_container","amount":1}],"time":4,"machine":"assembler"},{"name":"space_warper","inputs":[{"id":"graviton_lens","amount":1}],"outputs":[{"id":"space_warper","amount":1}],"time":10,"machine":"assembler"},{"name":"solar_sail","inputs":[{"id":"graphene","amount":1},{"id":"photon_combiner","amount":1}],"outputs":[{"id":"solar_sail","amount":2}],"time":4,"machine":"assembler"},{"name":"photon_combiner","inputs":[{"id":"circuit_board","amount":1},{"id":"prism","amount":2}],"outputs":[{"id":"photon_combiner","amount":1}],"time":3,"machine":"assembler"},{"name":"microcrystalline_component","inputs":[{"id":"high_purity_silicon","amount":2},{"id":"copper_ingot","amount":1}],"outputs":[{"id":"microcrystalline_component","amount":1}],"time":2,"machine":"assembler"},{"name":"quantum_processor","inputs":[{"id":"processor","amount":2},{"id":"plane_filter","amount":2}],"outputs":[{"id":"quantum_processor","amount":2}],"time":6,"machine":"assembler"},{"name":"casimir_crystal_advanced","inputs":[{"id":"optical_grating_crystal","amount":6},{"id":"graphene","amount":2},{"id":"hydrogen","amount":12}],"outputs":[{"id":"casimir_crystal","amount":1}],"time":4,"machine":"assembler"},{"name":"electromagnetic_matrix","inputs":[{"id":"magnetic_coil","amount":1},{"id":"circuit_board","amount":1}],"outputs":[{"id":"electromagnetic_matrix","amount":1}],"time":3,"machine":"matrix_lab"},{"name":"energy_matrix","inputs":[{"id":"energetic_graphite","amount":2},{"id":"hydrogen","amount":2}],"outputs":[{"id":"energy_matrix","amount":1}],"time":6,"machine":"matrix_lab"},{"name":"structure_matrix","inputs":[{"id":"diamond","amount":1},{"id":"titanium_crystal","amount":1}],"outputs":[{"id":"structure_matrix","amount":1}],"time":8,"machine":"matrix_lab"},{"name":"information_matrix","inputs":[{"id":"processor","amount":2},{"id":"particle_broadband","amount":1}],"outputs":[{"id":"information_matrix","amount":1}],"time":10,"machine":"matrix_lab"},{"name":"gravity_matrix","inputs":[{"id":"graviton_lens","amount":1},{"id":"quantum_processor","amount":1}],"outputs":[{"id":"gravity_matrix","amount":2}],"time":24,"machine":"matrix_lab"}]')}},[[18,1,2]]]);
//# sourceMappingURL=main.63fdf02d.chunk.js.map